<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No Hallu - AI ë¬¸í—Œ ê²€ì¦ ë„êµ¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
            padding: 40px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .header .subtitle {
            color: #667eea;
            font-size: 0.9rem;
            font-style: italic;
        }
        
        .input-section {
            margin-bottom: 30px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-weight: 500;
        }
        
        .citation-input {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s;
            line-height: 1.6;
        }
        
        .citation-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .btn {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #666;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .results {
            display: none;
        }
        
        .summary-box {
            background: #f0f4ff;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid #667eea;
        }
        
        .summary-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
        }
        
        .summary-content {
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .suspicious-found {
            color: #c53030;
            font-weight: 600;
        }
        
        .all-clear {
            color: #276749;
            font-weight: 600;
        }
        
        .result-item {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            position: relative;
        }
        
        .result-item.suspicious {
            border-left-color: #f56565;
            background: #fff5f5;
        }
        
        .result-item.checking {
            border-left-color: #fbbf24;
            background: #fffbeb;
        }
        
        .result-number {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e0e0e0;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .result-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: #333;
            padding-right: 50px;
        }
        
        .search-link {
            display: inline-block;
            margin-top: 12px;
            padding: 8px 16px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .search-link:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }
        
        .status-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .badge-suspicious {
            background: #fed7d7;
            color: #c53030;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: #667eea;
            width: 0%;
            transition: width 0.3s;
        }
        
        .loading-text {
            color: #666;
            margin-top: 15px;
        }
        
        .tips {
            background: #f7fafc;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .tips h3 {
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .tips ul {
            color: #718096;
            margin-left: 20px;
            line-height: 1.8;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 25px;
            // ì •ë¶€ê¸°ê´€ ìµœì‹  ìë£Œ ê²€ì‚¬
            if (citationInfo.year && (citationInfo.original.includes('í†µê³„ì²­') || 
                citationInfo.original.includes('ë³´ê±´ë³µì§€ë¶€') || 
                citationInfo.original.includes('êµìœ¡ë¶€') ||
                citationInfo.original.includes('ê³ ìš©ë…¸ë™ë¶€'))) {
                const year = parseInt(citationInfo.year);
                const currentYear = new Date().getFullYear();
                if (year === currentYear) {
                    suspicionLevel += 25;
                    reasons.push("ì •ë¶€ê¸°ê´€ ìµœì‹  ìë£Œ (í™•ì¸ í•„ìš”)");
                }
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>No Hallu ğŸ”</h1>
            <p>AIê°€ ìƒì„±í•œ ê°€ì§œ ë¬¸í—Œì„ ê²€ì¦í•˜ëŠ” êµì‚¬ìš© ë„êµ¬</p>
            <p class="subtitle">"í•˜ë‚˜ì˜ ê°€ì§œ ë¬¸í—Œë§Œ ì°¾ì•„ë„ ì„±ê³µ!"</p>
        </div>
        
        <div class="input-section">
            <label class="input-label">í•™ìƒì´ ì œì¶œí•œ ì°¸ê³ ë¬¸í—Œ ì „ì²´ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”:</label>
            <textarea 
                class="citation-input" 
                id="citationInput"
                placeholder="ì˜ˆì‹œ:&#10;1. ê¹€ìˆ˜í˜„. (2023). ë…ê±°ë…¸ì¸ì˜ ì‚¬íšŒì  ê³ ë¦½ê°ê³¼ ìš°ìš¸ì´ ì‚¶ì˜ ë§Œì¡±ë„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥. ë…¸ì¸ë³µì§€ì—°êµ¬, 78(1), 123-145.&#10;2. ì†¡í˜œêµ. (2023). AI ëŒë´„ ë¡œë´‡ì˜ ìœ¤ë¦¬ì  ìŸì ê³¼ ì •ì±…ì  í•¨ì˜. AIì™€ ì‚¬íšŒ, 4(1), 78-95.&#10;...&#10;&#10;í•œ ì¤„ì— í•˜ë‚˜ì”©, ë˜ëŠ” ì „ì²´ë¥¼ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."
            ></textarea>
        </div>
        
        <div class="button-group">
            <button class="btn btn-primary" onclick="checkAllCitations()">
                ğŸ” ì¼ê´„ ê²€ì¦ ì‹œì‘
            </button>
            <button class="btn btn-secondary" onclick="clearInput()">ì§€ìš°ê¸°</button>
        </div>
        
        <div class="loading" id="loading">
            <p style="font-size: 1.1rem; font-weight: 600; margin-bottom: 20px;">
                ë¬¸í—Œì„ ê²€ì¦í•˜ê³  ìˆìŠµë‹ˆë‹¤...
            </p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="loading-text" id="loadingText">0/0 ê²€ì‚¬ ì¤‘...</p>
        </div>
        
        <div class="results" id="results">
            <div class="summary-box" id="summaryBox"></div>
            <h3 style="margin-bottom: 20px;">ìƒì„¸ ê²€ì¦ ê²°ê³¼:</h3>
            <div id="resultsList"></div>
        </div>
        
        <div class="tips">
            <h3>ğŸ’¡ ì‚¬ìš© ì•ˆë‚´</h3>
            <ul>
                <li><strong>ì¼ê´„ ê²€ì¦:</strong> ì°¸ê³ ë¬¸í—Œ ì „ì²´ë¥¼ í•œ ë²ˆì— ê²€ì‚¬í•©ë‹ˆë‹¤</li>
                <li><strong>Google ê²€ìƒ‰ í™œìš©:</strong> ê° ë¬¸í—Œì„ Google/Google Scholarì—ì„œ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ë§í¬ ì œê³µ</li>
                <li><strong>ì˜ì‹¬ íŒ¨í„´ ê°ì§€:</strong> AIê°€ ìì£¼ ìƒì„±í•˜ëŠ” ê°€ì§œ ë¬¸í—Œ íŒ¨í„´ ìë™ íƒì§€</li>
                <li><strong>íš¨ìœ¨ì  ê²€ì¦:</strong> í•˜ë‚˜ì˜ ê°€ì§œ ë¬¸í—Œë§Œ ë°œê²¬í•´ë„ AI ì‚¬ìš© ì—¬ë¶€ íŒë‹¨ ê°€ëŠ¥</li>
            </ul>
        </div>
    </div>
    
    <script>
        // ì˜ì‹¬ìŠ¤ëŸ¬ìš´ íŒ¨í„´ ë°ì´í„°ë² ì´ìŠ¤
        const suspiciousPatterns = {
            titles: [
                /í•œêµ­.*ì˜ ì´í•´/,
                /í˜„ëŒ€.*ì—°êµ¬/,
                /.*í•™ ê°œë¡ /,
                /21ì„¸ê¸°.*/,
                /4ì°¨ ì‚°ì—…í˜ëª…/,
                /ë””ì§€í„¸ ì‹œëŒ€ì˜/,
                /AI.*ì¸ë¬¸í•™/,
                /ë¹…ë°ì´í„°ì™€.*/,
                /ì‚¬íšŒì  ê³ ë¦½ê°ê³¼ ìš°ìš¸/,
                /ì‚¶ì˜ ë§Œì¡±ë„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥/,
                /ìœ¤ë¦¬ì  ìŸì ê³¼ ì •ì±…ì  í•¨ì˜/,
                /í˜„í™©ê³¼ ë°œì „ ë°©í–¥/,
                /ë¯¸ë˜ì‚¬íšŒ.*ì—°êµ¬/
            ],
            publishers: [
                /ë¯¸ë˜ì¶œíŒì‚¬/,
                /í˜ì‹ ë¬¸í™”ì‚¬/,
                /ë””ì§€í„¸ì¶œíŒ/,
                /21ì„¸ê¸°ë¶ìŠ¤/,
                /AIì¶œíŒ/
            ],
            journals: [
                /AI.*ì—°êµ¬/,
                /ë””ì§€í„¸.*í•™íšŒì§€/,
                /ë¯¸ë˜.*ì—°êµ¬/,
                /í˜ì‹ .*ì €ë„/,
                /AIì™€ ì‚¬íšŒ/,
                /ë¹…ë°ì´í„°.*ì €ë„/,
                /4ì°¨ì‚°ì—…í˜ëª….*ì—°êµ¬/
            ],
            pageNumbers: [
                /pp\. 1-100/,
                /100-200/,
                /1-50$/,
                /123-145/,
                /78-95/,
                /45-67/,
                /101-125/,
                /51-75/,
                /1-25$/,
                /\b\d{2,3}-\d{2,3}\b/ // ë‘ì„¸ìë¦¬ ìˆ«ì ë²”ìœ„
            ],
            // ìœ ëª…ì¸ ì´ë¦„ íŒ¨í„´ ì¶”ê°€
            celebrityNames: [
                /ê¹€ìˆ˜í˜„/,
                /ì†¡í˜œêµ/,
                /ì´ë³‘í—Œ/,
                /ì „ì§€í˜„/,
                /ë°•ë³´ê²€/,
                /ì†¡ì¤‘ê¸°/,
                /í•œì§€ë¯¼/,
                /ê¹€íƒœí¬/,
                /í˜„ë¹ˆ/,
                /ì†ì˜ˆì§„/,
                /ì´ë¯¼í˜¸/,
                /ë°•ì‹ í˜œ/,
                /ê³µìœ /,
                /ê¹€ê³ ì€/,
                /ì´ì •ì¬/,
                /ì •ìš°ì„±/
            ]
        };
        
        function extractCitationInfo(citation) {
            const cleanCitation = citation.trim();
            
            // ì—°ë„ ì¶”ì¶œ
            const yearMatch = cleanCitation.match(/\((\d{4})\)/);
            const year = yearMatch ? yearMatch[1] : null;
            
            // ì €ìëª… ì¶”ì¶œ (ë” ì •êµí•œ íŒ¨í„´)
            const authorMatch = cleanCitation.match(/^([ê°€-í£A-Za-z\s,&Â·]+)(?=\s*\()/);
            const author = authorMatch ? authorMatch[1].trim() : null;
            
            // ì œëª© ì¶”ì¶œ (ë‹¤ì–‘í•œ í˜•ì‹ ì§€ì›)
            let title = null;
            const titlePatterns = [
                // ã€ã€, ã€Œã€, "", "" í˜•ì‹
                /[ã€Œã€""]([^ã€ã€""]+)[ã€ã€""]/,
                // ì—°ë„ ë‹¤ìŒì— ì˜¤ëŠ” ì œëª© (ë§ˆì¹¨í‘œë¡œ êµ¬ë¶„)
                /\d{4}\)\.\s*([^.]+?)(?:\.|,|\s*[ê°€-í£]+:|$)/,
                // "ë¡œ ì‹œì‘í•˜ëŠ” ì œëª©
                /\)\.\s*"([^"]+)"/,
                // ë‹¨í–‰ë³¸ í˜•ì‹ (ì¶œíŒì‚¬ ì•ì˜ í…ìŠ¤íŠ¸)
                /\)\.\s*([^.]+?)\.\s*(?:ì„œìš¸|ë¶€ì‚°|ëŒ€êµ¬|ì¸ì²œ|ê´‘ì£¼|ëŒ€ì „|ìš¸ì‚°|ê²½ê¸°|ê°•ì›|ì¶©ë¶|ì¶©ë‚¨|ì „ë¶|ì „ë‚¨|ê²½ë¶|ê²½ë‚¨|ì œì£¼|ì¶œíŒ|:)/,
                // í•™ìˆ ì§€ ë…¼ë¬¸ í˜•ì‹
                /\)\.\s*([^.]+?)[.,]\s*[ã€ã€Œ]/,
                // ì˜ì–´ ì œëª©
                /\)\.\s*([A-Z][^.]+?)(?:\.|,)/,
                // ê¸°íƒ€ ì¼ë°˜ì ì¸ ê²½ìš°
                /\d{4}\)[.,]?\s*([^.,]+?)(?:[.,]|$)/
            ];
            
            for (const pattern of titlePatterns) {
                const match = cleanCitation.match(pattern);
                if (match) {
                    title = match[1].trim();
                    break;
                }
            }
            
            // ì œëª©ì„ ëª» ì°¾ì€ ê²½ìš°, ì „ì²´ í…ìŠ¤íŠ¸ì—ì„œ í•µì‹¬ì–´ ì¶”ì¶œ
            let searchQuery = '';
            if (title) {
                searchQuery = `${title} ${author || ''} ${year || ''}`.trim();
            } else if (author && year) {
                // ì œëª©ì´ ì—†ì–´ë„ ì €ìì™€ ì—°ë„ë¡œ ê²€ìƒ‰
                searchQuery = `${author} ${year}`;
            } else {
                // ìµœí›„ì˜ ìˆ˜ë‹¨: ê´„í˜¸, ë§ˆì¹¨í‘œ ë“±ì„ ì œê±°í•œ í•µì‹¬ í…ìŠ¤íŠ¸
                searchQuery = cleanCitation
                    .replace(/\([^)]*\)/g, ' ') // ê´„í˜¸ ë‚´ìš© ì œê±°
                    .replace(/[ã€ã€ã€Œã€""]/g, ' ') // ì¸ìš©ë¶€í˜¸ ì œê±°
                    .replace(/\s+/g, ' ') // ë‹¤ì¤‘ ê³µë°± ì •ë¦¬
                    .substring(0, 100) // ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸°
                    .trim();
            }
            
            return { 
                author, 
                year, 
                title, 
                original: cleanCitation,
                searchQuery: searchQuery
            };
        }
        
        function analyzeCitation(citationInfo) {
            let suspicionLevel = 0;
            let reasons = [];
            
            // ìœ ëª…ì¸ ì´ë¦„ ê²€ì‚¬ (ì €ìëª…ì—)
            if (citationInfo.author) {
                suspiciousPatterns.celebrityNames.forEach(pattern => {
                    if (pattern.test(citationInfo.author)) {
                        suspicionLevel += 40;
                        reasons.push("ìœ ëª…ì¸ ì´ë¦„ ì‚¬ìš© (ì˜ì‹¬)");
                    }
                });
            }
            
            // ì œëª© íŒ¨í„´ ê²€ì‚¬
            if (citationInfo.title) {
                suspiciousPatterns.titles.forEach(pattern => {
                    if (pattern.test(citationInfo.title)) {
                        suspicionLevel += 25;
                        reasons.push("ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì œëª© íŒ¨í„´");
                    }
                });
            }
            
            // ì¶œíŒì‚¬ ê²€ì‚¬
            suspiciousPatterns.publishers.forEach(pattern => {
                if (pattern.test(citationInfo.original)) {
                    suspicionLevel += 30;
                    reasons.push("ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì¶œíŒì‚¬");
                }
            });
            
            // í•™ìˆ ì§€ ê²€ì‚¬
            suspiciousPatterns.journals.forEach(pattern => {
                if (pattern.test(citationInfo.original)) {
                    suspicionLevel += 30;
                    reasons.push("ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í•™ìˆ ì§€ëª…");
                }
            });
            
            // í˜ì´ì§€ ë²ˆí˜¸ ê²€ì‚¬
            suspiciousPatterns.pageNumbers.forEach(pattern => {
                if (pattern.test(citationInfo.original)) {
                    suspicionLevel += 20;
                    reasons.push("ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í˜ì´ì§€ ë²ˆí˜¸");
                }
            });
            
            // ì—°ë„ ê²€ì‚¬
            if (citationInfo.year) {
                const year = parseInt(citationInfo.year);
                const currentYear = new Date().getFullYear();
                const currentMonth = new Date().getMonth() + 1;
                
                // í˜„ì¬ ì—°ë„ì˜ í›„ë°˜ê¸° ìë£ŒëŠ” ì˜ì‹¬
                if (year === currentYear && currentMonth < 10) {
                    suspicionLevel += 15;
                    reasons.push(`${currentYear}ë…„ ìµœì‹  ìë£Œ (í™•ì¸ í•„ìš”)`);
                }
                // ë¯¸ë˜ ìë£Œ
                else if (year > currentYear) {
                    suspicionLevel += 50;
                    reasons.push("ë¯¸ë˜ ë‚ ì§œ");
                }
                // ì‘ë…„ í›„ë°˜ê¸° ìë£Œë„ ì²´í¬
                else if (year === currentYear - 1 && currentMonth < 6) {
                    suspicionLevel += 10;
                    reasons.push("ìµœê·¼ ì¶œíŒë¬¼ (í™•ì¸ í•„ìš”)");
                }
            }
            
            // ì œëª© ê¸¸ì´ ê²€ì‚¬
            if (citationInfo.title) {
                if (citationInfo.title.length < 5) {
                    suspicionLevel += 15;
                    reasons.push("ë„ˆë¬´ ì§§ì€ ì œëª©");
                } else if (citationInfo.title.length > 50) {
                    suspicionLevel += 10;
                    reasons.push("ë„ˆë¬´ ê¸´ ì œëª©");
                }
            }
            
            // íŠ¹ì • í‚¤ì›Œë“œ ì¡°í•© ê²€ì‚¬
            const suspiciousKeywordCombos = [
                /ì¸ê³µì§€ëŠ¥.*ëŒë´„/,
                /AI.*ìœ¤ë¦¬/,
                /ë¯¸ë˜ì‚¬íšŒ.*ì˜ˆì¸¡/,
                /4ì°¨.*í˜ëª….*ì •ì±…/
            ];
            
            suspiciousKeywordCombos.forEach(pattern => {
                if (pattern.test(citationInfo.original)) {
                    suspicionLevel += 20;
                    reasons.push("ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í‚¤ì›Œë“œ ì¡°í•©");
                }
            });
            
            // ì •ë¶€ê¸°ê´€ ìµœì‹  ìë£Œ ê²€ì‚¬
            if (citationInfo.year && (citationInfo.original.includes('í†µê³„ì²­') || 
                citationInfo.original.includes('ë³´ê±´ë³µì§€ë¶€') || 
                citationInfo.original.includes('êµìœ¡ë¶€') ||
                citationInfo.original.includes('ê³ ìš©ë…¸ë™ë¶€'))) {
                const year = parseInt(citationInfo.year);
                const currentYear = new Date().getFullYear();
                if (year === currentYear || year > currentYear) {
                    suspicionLevel += 25;
                    reasons.push("ì •ë¶€ê¸°ê´€ ìµœì‹  ìë£Œ (í™•ì¸ í•„ìš”)");
                }
            }
            
            return {
                suspicionLevel,
                reasons,
                isSuspicious: suspicionLevel >= 40
            };
        }
        
        async function checkAllCitations() {
            const input = document.getElementById('citationInput').value.trim();
            if (!input) {
                alert('ì°¸ê³ ë¬¸í—Œì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ë¬¸í—Œ ë¶„ë¦¬ (ì¤„ë°”ê¿ˆ ë˜ëŠ” ë²ˆí˜¸ë¡œ êµ¬ë¶„)
            let citations = input.split(/\n+/)
                .map(line => line.trim())
                .filter(line => line && line.length > 10)
                .map(line => line.replace(/^\d+[\.)]\s*/, '')); // ë²ˆí˜¸ ì œê±°
            
            if (citations.length === 0) {
                alert('ìœ íš¨í•œ ì°¸ê³ ë¬¸í—Œì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            // UI ì´ˆê¸°í™”
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            
            const progressFill = document.getElementById('progressFill');
            const loadingText = document.getElementById('loadingText');
            
            // ê²°ê³¼ ì €ì¥
            const results = [];
            let suspiciousCount = 0;
            
            // ê° ë¬¸í—Œ ê²€ì‚¬ (ì‹œë®¬ë ˆì´ì…˜)
            for (let i = 0; i < citations.length; i++) {
                // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                const progress = ((i + 1) / citations.length) * 100;
                progressFill.style.width = `${progress}%`;
                loadingText.textContent = `${i + 1}/${citations.length} ê²€ì‚¬ ì¤‘...`;
                
                // ë¬¸í—Œ ë¶„ì„
                const citationInfo = extractCitationInfo(citations[i]);
                const analysis = analyzeCitation(citationInfo);
                
                if (analysis.isSuspicious) {
                    suspiciousCount++;
                }
                
                results.push({
                    ...citationInfo,
                    ...analysis,
                    index: i + 1
                });
                
                // ì‹œê°ì  íš¨ê³¼ë¥¼ ìœ„í•œ ì§€ì—°
                await new Promise(resolve => setTimeout(resolve, 300));
            }
            
            // ê²°ê³¼ í‘œì‹œ
            displayResults(results, suspiciousCount);
            
            document.getElementById('loading').style.display = 'none';
            document.getElementById('results').style.display = 'block';
        }
        
        function displayResults(results, suspiciousCount) {
            // ìš”ì•½ ë°•ìŠ¤ ì—…ë°ì´íŠ¸
            const summaryBox = document.getElementById('summaryBox');
            
            if (suspiciousCount > 0) {
                summaryBox.innerHTML = `
                    <div class="summary-title">ğŸš¨ ê²€ì¦ ì™„ë£Œ</div>
                    <div class="summary-content">
                        ì´ <strong>${results.length}ê°œ</strong> ë¬¸í—Œ ì¤‘ 
                        <span class="suspicious-found">${suspiciousCount}ê°œì˜ ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë¬¸í—Œ</span>ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.<br><br>
                        <strong>ê²°ë¡ :</strong> ì´ ì°¸ê³ ë¬¸í—Œ ëª©ë¡ì€ AIë¥¼ ì‚¬ìš©í•´ ì‘ì„±ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.
                    </div>
                `;
            } else {
                summaryBox.innerHTML = `
                    <div class="summary-title">âœ… ê²€ì¦ ì™„ë£Œ</div>
                    <div class="summary-content">
                        ì´ <strong>${results.length}ê°œ</strong> ë¬¸í—Œì„ ê²€ì‚¬í–ˆìœ¼ë‚˜ 
                        <span class="all-clear">ì˜ì‹¬ìŠ¤ëŸ¬ìš´ íŒ¨í„´ì„ ë°œê²¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤</span>.<br><br>
                        <strong>ì°¸ê³ :</strong> ì˜ì‹¬ íŒ¨í„´ì´ ì—†ë‹¤ê³  í•´ì„œ AIë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤ê³  í™•ì‹ í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.
                        ì•„ë˜ Google ê²€ìƒ‰ ë§í¬ë¡œ ì¶”ê°€ í™•ì¸ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
                    </div>
                `;
            }
            
            // ìƒì„¸ ê²°ê³¼ í‘œì‹œ
            const resultsList = document.getElementById('resultsList');
            resultsList.innerHTML = '';
            
            results.forEach(result => {
                const resultDiv = document.createElement('div');
                resultDiv.className = `result-item ${result.isSuspicious ? 'suspicious' : 'checking'}`;
                
                const googleSearchUrl = `https://www.google.com/search?q=${encodeURIComponent(result.searchQuery)}`;
                const scholarSearchUrl = `https://scholar.google.com/scholar?q=${encodeURIComponent(result.searchQuery)}`;
                
                resultDiv.innerHTML = `
                    <div class="result-number">${result.index}</div>
                    <div class="result-title">${result.original}</div>
                    ${result.reasons.length ? `
                        <div style="color: #666; margin: 10px 0; font-size: 14px;">
                            âš ï¸ ${result.reasons.join(', ')}
                        </div>
                    ` : ''}
                    <div style="color: #888; margin: 8px 0; font-size: 13px;">
                        ê²€ìƒ‰ì–´: "${result.searchQuery}"
                    </div>
                    <div style="margin-top: 12px;">
                        <a href="${googleSearchUrl}" target="_blank" class="search-link">
                            ğŸ” Googleì—ì„œ ê²€ìƒ‰
                        </a>
                        <a href="${scholarSearchUrl}" target="_blank" class="search-link" style="margin-left: 10px;">
                            ğŸ“ Google Scholarì—ì„œ ê²€ìƒ‰
                        </a>
                        ${result.isSuspicious ? '<span class="status-badge badge-suspicious">ì˜ì‹¬ë¨</span>' : ''}
                    </div>
                `;
                
                resultsList.appendChild(resultDiv);
            });
        }
        
        function clearInput() {
            document.getElementById('citationInput').value = '';
            document.getElementById('results').style.display = 'none';
        }
        
        // ì˜ˆì‹œ ë°ì´í„° ì¶”ê°€ ê¸°ëŠ¥
        function loadExample() {
            const exampleCitations = `1. ê¹€ìˆ˜í˜„. (2023). ë…ê±°ë…¸ì¸ì˜ ì‚¬íšŒì  ê³ ë¦½ê°ê³¼ ìš°ìš¸ì´ ì‚¶ì˜ ë§Œì¡±ë„ì— ë¯¸ì¹˜ëŠ” ì˜í–¥. ë…¸ì¸ë³µì§€ì—°êµ¬, 78(1), 123-145.
2. ë³´ê±´ë³µì§€ë¶€. (2023). 2023ë…„ë„ ë…¸ì¸ì‹¤íƒœì¡°ì‚¬ (ë˜ëŠ” ë¬´ì—°ê³  ì‚¬ë§ì(ê³ ë…ì‚¬) í˜„í™© ë° ëŒ€ì±… ê´€ë ¨ ë³´ê³ ì„œ).
3. ì†¡í˜œêµ. (2023). AI ëŒë´„ ë¡œë´‡ì˜ ìœ¤ë¦¬ì  ìŸì ê³¼ ì •ì±…ì  í•¨ì˜. AIì™€ ì‚¬íšŒ, 4(1), 78-95.
4. ìµœìœ¤ì •. (2023). ì¸ê³µì§€ëŠ¥ ê¸°ë°˜ ë…ê±°ë…¸ì¸ ëŒë´„ ì„œë¹„ìŠ¤ì˜ í˜„í™©ê³¼ ë°œì „ ë°©í–¥. í•œêµ­ì¼€ì–´ë§¤ë‹ˆì§€ë¨¼íŠ¸í•™íšŒì§€, 15(2), 45-67.
5. í†µê³„ì²­ (2024). ì¥ë˜ì¸êµ¬ì¶”ê³„: 2022-2072ë…„.
6. í•œêµ­ë³´ê±´ì‚¬íšŒì—°êµ¬ì›. (2023). ë¯¸ë˜ì‚¬íšŒ ëŒë´„ ìˆ˜ìš” ì˜ˆì¸¡ ë° ê³µê¸‰ì²´ê³„ ì—°êµ¬.`;
            
            document.getElementById('citationInput').value = exampleCitations;
        }
    </script>
</body>
</html>
